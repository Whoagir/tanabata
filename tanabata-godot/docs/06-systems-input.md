# InputSystem (система ввода)

## Назначение

Обрабатывает клики мыши и клавиши. Определяет, куда кликнули (гекс, UI), и ставит команды в очередь.

## Очередь команд

Чтобы не перегружать кадр, команды накапливаются и выполняются по несколько за кадр. Типы команд: place_tower, remove_tower, select_tower, toggle_selection.

## Клики мыши

**Левая кнопка:**
- BUILD: по пустому гексу — поставить башню; по башне — подсветить.
- SELECTION: по башне — переключить выбор (сохранить / не сохранять).

**Правая кнопка:**
- BUILD: по башне — удалить башню.

## Определение гекса

Экранные координаты мыши переводятся в мировые через камеру и масштаб. Из мировых координат вычисляется гекс. Если гекса нет на карте — клик игнорируется.

## Размещение башни

Проверяется фаза, лимит башен, возможность поставить на гекс (проходимость, возможность размещения, отсутствие башни). Тип башни выбирается по логике волн или по режиму отладки. Создаётся сущность башни, обновляется тайл, башня добавляется в энергосеть.

## Удаление башни

Башня удаляется из ECS, тайл снова проходим, энергосеть пересобирается.

## Выбор типа башни

В обычном режиме: первые 4 волны в блоке 10 — первая башня майнер, остальные атакующие; следующие 6 волн — все атакующие. В режиме отладки: 1 — случайная атакующая, 2 — майнер, 3 — стена.
