# EntityRenderer

## Назначение

Рисует башни, врагов, снаряды, лазеры и volcano_effects на основе данных ECS.

## Башни

Форма зависит от типа:
- MINER — шестиугольник (жёлтый), обводка и синий кружок при активности на руде.
- ATTACK — круг (базовые) или шестиугольник с золотой обводкой (крафтованные, crafting_level >= 1).
- WALL — не рисуется здесь (WallRenderer).

Цвет берётся из tower_def.visuals.color. Неактивные башни затемнены. Есть обводка для подсветки (при выделении). Стены пропускаются.

## Враги

Квадрат (или полигон). Цвет из renderable. Масштаб зависит от здоровья (от 60% до 100%).

**Модуляция по эффектам** (приоритет): damage_flash (красный) → jade_poisons (зелёный по стакам) → poison_effects → slow_effects (голубой). jade_poisons: чем больше стаков, тем насыщеннее зелёный (ENEMY_JADE_POISON_COLOR).

## Снаряды

Круг из 16 точек. Цвет по типу урона (physical, magical, pure, poison). Позиция обновляется каждый кадр. Пул узлов для переиспользования.

## Лазеры

Line2D от start_pos до target_pos. Рисуются на LaserLayer (дочерний узел EntityRenderer, z_index 100). Толщина 5 px. Длительность из Config.LASER_DURATION (0.4 с). Позиции приводятся к Vector2 через _to_vector2. Удаляются когда сущность laser исчезает из ECS (таймер истёк). Цвет по типу урона.

## Volcano

Огненные круги (Polygon2D) на EffectLayer. volcano_effects — pos, timer, max_radius, color. Рисуются при тиках Вулкана.
