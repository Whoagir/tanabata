# UI и HUD

## Элементы

**Верхняя панель (слева):**
- Здоровье игрока (цвет по порогам: зелёный/жёлтый/красный).
- Номер волны.
- Счётчик башен (построено/лимит).
- Счётчик убийств (total_enemies_killed).
- Уровень и XP (Lv.N, прогресс до следующего уровня).
- Кнопка «Рецепты (B)» — открывает книгу рецептов (таблица крафта).

**Топ-5 урона вышек (слева под панелью):**
- Во время волны — урон за текущую волну; в BUILD/SELECTION — за прошлую (last_wave_tower_damage).
- Строки вида «N. Имя MVP K: урон» (MVP показывается только при K > 0).
- Красная подсветка (RichTextLabel BBCode): строка топ-1 по урону и строки вышек с MVP 5.

**Индикатор руды (справа сверху):**
- Прогресс-бар по оставшейся доле руды (current/max по всем жилам карты — get_ore_network_totals). Подпись «Руда: X / Y» с теми же глобальными суммами. При наведении на майнер в InfoPanel показывается руда только его сети (get_network_ore_stats).

**Индикатор фазы (справа сверху):**
- Круг, цвет по фазе (синий/жёлтый/красный).
- Клик — переход на следующую фазу.

**Кнопки (справа снизу):**
- Скорость времени (1x, 2x, 4x). Цвет кнопки меняется.
- Пауза.

## Обновление

Каждый кадр обновляются надписи из game_state и ECS. Индикатор перерисовывается при смене фазы.

## Переходы фаз по клику

- BUILD → SELECTION: переход в выбор башен.
- SELECTION → WAVE: финализация выбора (невыбранные → стены), переход в волну.
- WAVE → BUILD: сброс счётчика, переход в строительство.

## Область кликов

Панель сверху не блокирует клики по карте (mouse_filter IGNORE). Кнопки индикатора и скорости перехватывают клики.
