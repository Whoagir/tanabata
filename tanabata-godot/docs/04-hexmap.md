# Гексагональная карта

## Система координат

Используются осевые координаты (axial): Q и R. Третья координата S вычисляется как минус сумма Q и R. Ориентация — остриём вверх (pointy-top).

## Основные операции

- **Гекс в пиксели** — по размеру гекса и координатам.
- **Пиксели в гекс** — округление дробных координат до ближайшего гекса.
- **Расстояние** — по формуле кубических координат.
- **Соседи** — шесть направлений, для каждого гекса список соседних гексов.
- **Линия** — проверка, лежат ли два гекса на одной линии (для майнеров).

## Tile (тайл)

У каждого гекса есть тайл с полями:
- passable — можно ли пройти.
- can_place_tower — можно ли ставить башню.
- has_tower — стоит ли башня.
- tower_id — ID башни на тайле.

## Генерация карты

1. Базовая гексагональная сетка в заданном радиусе.
2. Точка входа (Entry) и выхода (Exit) на краях.
3. Чекпоинты — шесть точек по кругу, в определённом порядке.
4. Береговые тайлы — без возможности поставить башню.
5. Выход — непроходим для врагов.
6. Связность — обход, чтобы убрать «отрезанные» зоны.

## Особые гексы

- **Entry** — точка спавна врагов (вне основной сетки).
- **Exit** — конечная точка пути; враги при достижении наносят урон игроку и удаляются.
- **Checkpoints** — промежуточные цели пути, враги идут через них по порядку.
