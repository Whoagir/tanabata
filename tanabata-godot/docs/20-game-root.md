# GameRoot (главная сцена)

## Назначение

Корневая сцена игры. Создаёт системы, рендереры, обрабатывает ввод, управляет камерой и эффектами.

## Инициализация

- Рендеринг гексов карты.
- Создание InputSystem, WaveSystem, MovementSystem, CombatSystem, ProjectileSystem, StatusEffectSystem, AuraSystem, CraftingSystem, VolcanoSystem, BeaconSystem.
- Добавление EntityRenderer, OreRenderer, EnergyLineRenderer, WallRenderer, AuraRenderer, TowerPreview, HUD, InfoPanel, RecipeBook.
- Установка z_index для слоёв.

## Обработка ввода

- Клавиши: Space (смена фазы), P (пауза), B (книга рецептов), **I (дебаг-метки + панель волны 0–40)**, 1/2/3 (тип башни в отладке), 0 (выкл. отладка), Shift+PageUp (профайлер).
- Мышь: клики передаются в InputSystem если не попали в UI.
- Проверка _is_ui_area — клики по кнопкам не идут в игровой мир.

## Дебаг-режим

- **I** — вкл/выкл дебаг-метки (координаты гексов при наведении) и **панель волны** справа.
- В панели волны (+, −) задаётся номер волны, на которую перейти в начале следующей волны. Диапазон: **0–40** (0 = не прыгать, идти по счётчику). При нажатии Space в фазе строительства следующая волна будет с выбранным номером.

## Эффекты

- Подсветка гексов под курсором (hover). Центральный гекс ярче, соседи слабее. Сброс при выходе мыши с карты.
- След за курсором — затухающие гексы по траектории движения. Время затухания ~0.65 сек.
- Дебаг-метки — координаты гексов при наведении (вкл. клавишей I).

## Скорость времени

Delta умножается на time_speed из game_state. Системы (волны, движение, бой, снаряды) используют scaled_delta.
