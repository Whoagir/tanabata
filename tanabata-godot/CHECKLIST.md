# Checklist - Что сделано и что дальше

## Созданные файлы

### Документация (5 файлов)
- [x] `README.md` - Полное описание архитектуры проекта
- [x] `ROADMAP.md` - Детальный план разработки (8 этапов)
- [x] `GETTING_STARTED.md` - Инструкция по запуску
- [x] `PROJECT_STATUS.md` - Текущий статус и метрики
- [x] `core/components/README.md` - Описание всех компонентов

### Core (Игровая логика) - 6 файлов
- [x] `autoload/config.gd` - Все константы и настройки
- [x] `autoload/game_manager.gd` - Главный менеджер игры
- [x] `core/types/game_types.gd` - Энумы и типы
- [x] `core/hexmap/hex.gd` - Гексагональная математика
- [x] `core/hexmap/hex_map.gd` - Карта с генерацией
- [x] `core/hexmap/pathfinding.gd` - A* алгоритм
- [x] `core/ecs/ecs_world.gd` - ECS система

### Сцены (4 файла)
- [x] `scenes/main.tscn` - Главная сцена
- [x] `scenes/main.gd` - Скрипт главной сцены
- [x] `scenes/game_root.tscn` - Игровой корень
- [x] `scenes/game_root.gd` - Скрипт игрового корня

### Данные (5 файлов JSON)
- [x] `data/towers.json` - 17 башен
- [x] `data/enemies.json` - 7 врагов + босс
- [x] `data/recipes.json` - 5 рецептов
- [x] `data/loot_tables.json` - Таблицы дропа
- [x] `data/waves.json` - 10 волн

### Настройки
- [x] `project.godot` - Настройки Godot с autoload

**Всего:** 77 файлов (включая .import и .godot/)

---

## Что работает прямо сейчас

### При запуске (F5):
- [x] Загружается GameManager
- [x] Инициализируется ECS World
- [x] Генерируется гексагональная карта (процедурно)
- [x] Загружаются все JSON данные (башни, враги, рецепты, волны)
- [x] Отображается карта с гексами
- [x] Видны Entry (желтый), Exit (желтый), 6 Checkpoints (оранжевые)
- [x] Камеру можно двигать (WASD)
- [x] Камеру можно приближать (R/T)
- [x] Консоль показывает информацию о карте

### Горячие клавиши:
- [x] `F12` - Вывод состояния игры в консоль
- [x] `F10` - God Mode
- [x] `F3` - Visual Debug Mode
- [x] `F9` - Пауза (планируется)
- [x] `WASD` - Движение камеры
- [x] `R/T` - Zoom
- [x] `Y` - Reset zoom

---

## Следующие шаги (MVP)

### Этап 1: Базовые системы (1-2 недели)

#### 1. Создать placeholder спрайты
```
assets/sprites/
├── towers/
│   ├── TA.png (простой квадрат красный)
│   ├── TE.png (простой круг фиолетовый)
│   ├── TO.png (простой треугольник голубой)
│   ├── TOWER_MINER.png (шестеренка)
│   └── TOWER_WALL.png (серый блок)
├── enemies/
│   ├── ENEMY_NORMAL_WEAK.png (маленький круг)
│   ├── ENEMY_NORMAL.png (средний круг)
│   └── ENEMY_BOSS.png (большой круг)
└── projectiles/
    └── projectile.png (маленькая точка)
```

**Можно использовать:**
- Простые геометрические фигуры
- Генераторы спрайтов онлайн
- Placeholder из Asset Store

#### 2. Реализовать WaveSystem
```gdscript
# core/systems/wave_system.gd
class_name WaveSystem

func update(delta: float):
    # 1. Проверить, есть ли активная волна
    # 2. Если нет - создать новую
    # 3. Спавнить врагов по таймеру
    # 4. Создавать Enemy entities с компонентами
    # 5. Проверять завершение волны
```

**Требуется:**
- Чтение wave_defs из GameManager
- Создание врагов через ECS
- Таймер спавна
- Расчет урона для врагов

#### 3. Реализовать MovementSystem
```gdscript
# core/systems/movement_system.gd
class_name MovementSystem

func update(delta: float):
    # Для каждого врага с Path компонентом:
    # 1. Взять текущую цель (Path.hexes[current_index])
    # 2. Двигаться к ней
    # 3. При достижении: current_index++
    # 4. Проверить замедления (SlowEffect, JadePoison)
    # 5. При достижении Exit - нанести урон игроку
```

**Требуется:**
- Обработка Path компонента
- Учет замедлений
- Проверка достижения чекпоинтов
- Нанесение урона игроку

#### 4. Реализовать CombatSystem
```gdscript
# core/systems/combat_system.gd
class_name CombatSystem

func update(delta: float):
    # Для каждой башни с Combat:
    # 1. Проверить активность (IsActive)
    # 2. Уменьшить FireCooldown
    # 3. Найти цель в радиусе
    # 4. Проверить энергию (через энергосеть)
    # 5. Создать снаряд или нанести урон (лазер)
    # 6. Потратить энергию
```

**Требуется:**
- Поиск целей в радиусе
- Создание снарядов
- Обработка разных типов атак (PROJECTILE, LASER)

#### 5. Реализовать ProjectileSystem
```gdscript
# core/systems/projectile_system.gd
class_name ProjectileSystem

func update(delta: float):
    # Для каждого снаряда:
    # 1. Двигаться в направлении цели
    # 2. Проверить попадание
    # 3. Применить урон и эффекты
    # 4. Удалить снаряд
```

**Требуется:**
- Предсказание позиции цели
- Условное самонаведение
- Impact Burst (для Malachite)

#### 6. Добавить рендеринг
```gdscript
# godot_adapter/rendering/tower_renderer.gd
# godot_adapter/rendering/enemy_renderer.gd
# godot_adapter/rendering/projectile_renderer.gd

# Для каждой сущности с Renderable:
# 1. Создать Sprite2D
# 2. Обновлять позицию из ECS
# 3. Обновлять цвет, поворот
# 4. Удалять при смерти сущности
```

---

## Чек-лист MVP (Минимальный продукт)

### Базовый геймплей
- [ ] Спавн врагов
- [ ] Движение врагов по пути (через чекпоинты)
- [ ] Размещение башен на карте
- [ ] Атака башен по врагам
- [ ] Полет снарядов
- [ ] Нанесение урона (с учетом брони)
- [ ] Смерть врагов
- [ ] Урон игроку при достижении Exit
- [ ] Смена волн (хотя бы 5 волн)

### 3 фазы игры
- [ ] BUILD_STATE - размещение башен (лимит 5)
- [ ] WAVE_STATE - волна врагов
- [ ] TOWER_SELECTION_STATE - выбор 2 башен для сохранения

### UI (минимальный)
- [ ] Здоровье игрока (шкала)
- [ ] Номер волны
- [ ] Индикатор фазы (BUILD/WAVE/SELECTION)
- [ ] Информация о башне при наведении

### Система опыта
- [ ] Получение XP за убийство врагов
- [ ] Повышение уровня
- [ ] Отображение уровня и XP

---

## После MVP

### Этап 2: Энергосеть (1-2 недели)
- [ ] Генерация 3 жил руды
- [ ] MST алгоритм (Крускал)
- [ ] Визуализация линий (Line2D)
- [ ] Деградация энергии
- [ ] Истощение руды
- [ ] Бонус от количества руды

### Этап 3: Крафт (1-2 недели)
- [ ] Обнаружение комбинаций (по рецептам)
- [ ] Комбинирование 3→1
- [ ] Upgrade 2→1, 4→1
- [ ] Downgrade с риском
- [ ] UI: книга рецептов
- [ ] Ручной выбор башен (Shift+Click)

### Этап 4: Статус-эффекты (1 неделя)
- [ ] SlowEffect - замедление
- [ ] PoisonEffect - яд (DOT)
- [ ] JadePoisonContainer - стакующийся яд
- [ ] AuraEffect - ускорение атаки (от DE башни)
- [ ] Визуализация эффектов

### Этап 5: Специальные башни (1-2 недели)
- [ ] TOWER_SILVER - лазер
- [ ] TOWER_MALACHITE - сплит + взрыв
- [ ] TOWER_VOLCANO - AOE периодический урон
- [ ] TOWER_LIGHTHOUSE - вращающийся луч
- [ ] TOWER_JADE - стакующийся яд

### Этап 6: UI и эффекты (1 неделя)
- [ ] Полноценный HUD
- [ ] Книга рецептов (красивая)
- [ ] Информационные панели
- [ ] Визуальные эффекты (частицы)
- [ ] Звуки

### Этап 7: Полировка (1 неделя)
- [ ] Оптимизация (frustum culling, pooling)
- [ ] Балансировка
- [ ] Туториал
- [ ] Настройки

---

## Известные проблемы

### Нужно доработать:
- [ ] Генерация карты (этапы 4-5 упрощены)
- [ ] Рендеринг гексов (слишком много Polygon2D)
- [ ] Колесико мыши для zoom

### Технический долг:
- [ ] Unit-тесты (при желании)
- [ ] Профилирование производительности
- [ ] Документация API

---

## Прогресс

**Фундамент:** 100%  
**MVP:** ~20%  
**Полная игра:** ~10%

---

## Цель

Перенести полнофункциональную Tower Defense игру с **Go (3D)** на **Godot (2D)** с сохранением всех механик:

- [x] Гексагональная карта
- [x] Процедурная генерация
- [x] ECS архитектура
- [x] Fixed timestep
- [ ] Система волн
- [ ] Боевая система
- [ ] Энергосеть (MST)
- [ ] Крафт башен
- [ ] Руда с истощением
- [ ] Статус-эффекты
- [ ] Специальные башни
- [ ] UI

---

## Мотивация

Ты уже прошел самую сложную часть:
- Понял архитектуру
- Создал структуру
- Реализовал базовые системы
- Перенес все данные

Теперь осталось **итеративно добавлять системы** по ROADMAP.md!

Каждая система - это **маленькая победа**.

---

## Начни с малого

1. **Сегодня:** Создай простые спрайты (квадраты/круги)
2. **Завтра:** Реализуй WaveSystem (враги спавнятся)
3. **Послезавтра:** Реализуй MovementSystem (враги двигаются)
4. **Через неделю:** Первый выстрел башни!

**Удачи!**
