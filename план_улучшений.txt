### Обновленный план улучшений

**Шаг 1: Система "Здоровья" и последствий проигрыша**
1.  **Механика "Здоровья":**
    *   В `internal/component/player.go` в `PlayerStateComponent` добавить поле `Health` с начальным значением 20.
    *   В `internal/system/movement.go` реализовать логику: когда враг достигает цели, он наносит урон игроку.
        *   Обычные враги наносят случайный урон от 1 до 3.
        *   Враги-боссы (будем определять по ID) наносят фиксированный урон 10.
2.  **UI и Состояния:**
    *   Создать новый UI-элемент справа на экране: сетка 4x5 из кружков. Красные кружки — текущее здоровье, остальные — темные.
    *   Реализовать состояние "Игра окончена": когда `Health <= 0`, игра останавливается, появляется э��ран с надписью "Вы проиграли!" и кнопкой "Рестарт".
3.  **Отладка:**
    *   Добавить горячую клавишу (например, F10) для переключения "режима бессмертия", чтобы урон по базе не проходил.

**Шаг 2: Создание базовой структуры меню**
*   (Приступим к этому шагу **только** после полного завершения и вашей проверки Шага 1).
1.  Восстановить и отладить `internal/state/menu_state.go` и `pause_state.go`.
2.  Создать `MainMenuState` как основное стартовое состояние.
3.  В `MainMenuState` добавить функциональные кнопки: "Начать игру", "Настройки", "Выход".
4.  Изменить `cmd/game/main.go` для запуска `MainMenuState` по умолчанию.
5.  Реализовать запуск игры напрямую в `game_state` с помощью флага командной строки `--dev` для удобства разработки.

**Шаг 3: Экран настроек управления**
*   (Приступим после Шага 2).
1.  Спроектировать UI-панел�� для переназначения клавиш (например, движение камеры, пауза, вызов книги рецептов и т.д.).
2.  Реализовать логику сохранения и загрузки этих настроек в отдельный файл (например, `controls.json`).
3.  Сделать кнопку "Настройки" в главном меню и меню паузы активной, чтобы она вела на этот экран.

**Шаг 4: Интерактивное обучение**
*   (Долгосрочная задача, после основных механик).
1.  Спроектировать систему скриптованных событий и триггеров (например, "построил первую башню", "подключил энергию").
2.  Создать UI для контекстных подсказок, которые будут вести игрока по шагам.
3.  Добавить в главное меню кнопку "Обучение", запускающую специальный игровой сценарий.



сломался выбор через шифт 
