Начал работу над проектом.
Изучил информацию.txt, понял что надо разделить переменную IsSelected на две, так как она отвечает и за выбор в группе и за выбор в фазе.
Добавил IsManuallySelected в компонент tower.
Изменил ClearManualSelection и HandleShiftClick для работы с новой переменной.
Изменил SetSelectedTower для работы только с IsSelected.
Изменил отрисовку в Draw в game_state.go для учета обоих флагов.
Починил баг с авто-выбором в фазе выбора, добавив проверку на TowerSelectionState в handleGameClick.
Починил баг с "залипанием" подсветки после фазы выбора, добавив ClearAllSelections() в SwitchToWaveState и в обработку клика мимо башен.
Провел глубокий анализ причин визуальных багов с подсветкой.
Разработал и реализовал план по полн��му разделению логики:
- IsSelected: для сохранения башни.
- IsManuallySelected: для группы крафта.
- IsHighlighted: для UI-подсветки при клике.
Добавил поле IsHighlighted в компонент tower.
Создал функции SetHighlightedTower и ToggleTowerSelectionForSave.
Обновил обработчики кликов и систему событий для использования новой логики.
Исправил отрисовку для использования IsHighlighted.
Запустил игру для проверки.